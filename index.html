<!DOCTYPE html>
<html>
	<head>
		<title>Explora</title>
		<meta charset="utf-8">	
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="icon" href="assets/img/favicon.ico">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	  	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	  	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
		<link rel="stylesheet" type="text/css" href="assets/css/custom.css">
		<link rel="stylesheet" type="text/css" href="assets/js/custom.js">
		<!--[if lt IE 9]>
		<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js">
		</script>
		<![endif]-->
		<!-- Start: Script -->
		<script>
			$(document).ready(function() {
				$(".btn-pref .btn").click(function () {
				$(".btn-pref .btn").removeClass("btn-danger").addClass("btn-default");
				$(this).removeClass("btn-default").addClass("btn-danger");   
				
				});
			});
		</script>
		<!-- End: Script   -->
	</head>
	<body>
	<!-- Start: Header -->
		<header>
			<nav class="navbar navbar-default">
				<div class="container-fluid">
					<div class="navbar-header">
						<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						</button>
						<a class="navbar-brand" href="#"><img src="assets/img/logo.jpg" class="img-responsive" id="logo" height="30px" width="50px" /></a>
					</div>
					<div class="col-md-2 col-md-offset-4  hidden-xs hidden-sm">
						<a class="navbar-brand" href="#"><img src="assets/img/explora.jpg" class="img-responsive" id="site-title" height="80px" width="150px" /></a>
					</div>
					<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
						<ul class="nav navbar-nav navbar-right">
							<form class="navbar-form navbar-left">
							<div class="form-group">
								<input type="text" id="ask" class="form-control" placeholder="Search">
							</div>
							<button type="submit" class="btn btn-danger" id="search-button#fcb2ae">Search</button>
							</form>
						</ul>
					</div>
				</div>
			</nav>			
		</header>
	<!-- End: Header -->

	<!-- Start: Tabs -->
		<div class="row">
			<div class="col-md-12 col-sm-12 col-xs-12">
				<div class="btn-pref btn-group btn-group-justified btn-group-lg" id="tabs">
					<div class="btn-group" role="group">
						<button type="button" id="stars" class="btn btn-danger toggle" href="#tab1" data-toggle="tab"><span class="glyphicon glyphicon-star" aria-hidden="true"></span>
						<div>Recent</div>
						</button>
					</div>
					<div class="btn-group" role="group">
						<button type="button" id="favorites" class="btn btn-default toggle" href="#tab2" data-toggle="tab"><span class="glyphicon glyphicon-heart" aria-hidden="true"></span>
						<div>Trending</div>
						</button>
					</div>
					<div class="btn-group" role="group">
						<button type="button" id="following" class="btn btn-default toggle" href="#tab3" data-toggle="tab"><span class="glyphicon glyphicon-user" aria-hidden="true"></span>
						<div>Popular</div>
						</button>
					</div>
				</div>
				<div class="row-fluid ques-content">
					<div class="col-md-6 col-sm-6 col-xs-6">
						<button type="button" class="btn btn-danger" id="post_question" data-toggle="modal" data-target="#postQuestion">Post Question</button>
					</div>
					<div class="col-md-2 col-md-offset-4 col-sm-2 col-sm-offset-2 col-xs-2 col-xs-offset-2">
						<select id="semester-dropdown">
							<option selected disabled>semester</option>
							<option value="1">sem1</option>
							<option value="2">sem2</option>
							<option value="3">sem3</option>
							<option value="3">sem4</option>
							<option value="3">sem5</option>
							<option value="3">sem6</option>
							<option value="3">sem7</option>
							<option value="3">sem8</option>
						</select>
					</div>
				</div>

				<div class="row-fluid">
					<div class="tab-content" id="tab-content">
						<div class="tab-pane fade in active" id="tab1">

						</div>
						<div class="tab-pane fade in active" id="tab2">

						</div>
						<div class="tab-pane fade in active" id="tab3">

						</div>
					</div>
				</div>
		<!-- End: Tabs -->
				<div class="row-fluid pag-top centre">
					<div class="col-md-12 col-sm-12 col-xs-12">
						<ul class="pagination centre">
							<li class="tabs"><a href="#">«</a></li>
							<li class="tabs"><a href="#">1 <span class="sr-only">(current)</span></a></li>
							<li class="tabs"><a href="#">2</a></li>
							<li class="tabs"><a href="#">3</a></li>
							<li><a href="#">»</a></li>
						</ul>	
					</div>
				</div>
			</div>
		</div>
		<footer>
			<div class="row-fluid centre">
				<div class="col-md-4" id="social">
				<h5>© 2017 <span style="color: #b92b27">EXPLORA</span> &nbsp; All Rights Reserved.</h5>


				</div>
				<div class="col-md-3 col-md-offset-5" id="social">
					<a href="https://www.facebook.com/CrazinessExplored/?fref=ts"><i class="fa fa-facebook-square fa-lg" aria-hidden="true"></i></a>&nbsp;
					<a href="https://www.instagram.com/krazy_talks/"><i class="fa fa-instagram fa-lg" aria-hidden="true"></i></a>&nbsp;
					<a href="https://twitter.com/krazytalks1"><i class="fa fa-twitter-square fa-lg" aria-hidden="true"></i></a>
				</div>
			</div>
		</footer>
		
         
		<!-- Modal for Post Question -->
			<div class="modal fade" id="postQuestion" role="dialog">
			<div class="modal-dialog">
		<!-- Modal content-->
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h4 class="modal-title centre">POST QUESTION</h4>
				</div>
			<div class="modal-body">
				<form>
					<div class="form-group">
						<input type="text" class="form-control" id="name" placeholder="Enter name">
					</div>
					<div class="form-group">
						<input type="email" class="form-control" id="email" placeholder="Enter email">
					</div>
					<div class="form-group">
						<input type="password" class="form-control" id="pwd" placeholder="Enter password">
					</div>
						<div class="form-group">
						<select id="subject">
						   <option selected disabled>Choose here</option>
						  <option value="1">subject1</option>
						  <option value="2">subject2</option>
						  <option value="3">subject3</option>
						</select>
					</div>
					<div class="form-group">
						<select id="semester">
						   <option selected disabled>Choose here</option>
						  <option value="1">sem1</option>
						  <option value="2">sem2</option>
						  <option value="3">sem3</option>
						</select>
					</div>
				
					<div class="form-group">
						<textarea class="form-control" rows="5" id="question"></textarea>
					</div>
					<div class="modal-footer">
						<button type="submit" id="butn" class="btn btn-danger">Submit</button>
						<button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
					</div>
				</form>
			</div>

			</div>

			</div>
			</div>
  <script type="text/javascript">

   var abc="Recent";
   var page=0;
   dataload();
  	$( ".toggle" ).click(function() {     
  		abc= $(this).find(':last-child').text(); 
 	dataload();
 
	});

   $( ".tabs" ).click(function() {
     
  	page= $(this).text(); 
  	console.log(page);
 	dataload(); 
	});

  	function dataload () {
  	// body...
  
	    $.ajax({
  		method: "GET",
  		url: 'http://acadprojects.com/py/explora/question?page=0&type='+abc, 
		})
  	.done(function( msg ) {
  	var infoHTML='';

  	
  	$.each(msg.data, function(index, value) { 
       infoHTML+='<div class="row ques-content">';
 	   infoHTML+='<div class="col-sm-3 col-sm-offset-1 col-xs-3 col-xs-offset-1 col-md-2 col-md-offset-1" class="user">';       
 	   infoHTML+='<figure class="centre uname">';
       infoHTML+='<img  src="assets/img/user1.png" class="img-responsive" id="img-circle"></figure>' ;    
	   infoHTML+='<h4 class="center">' + value.posted_by_email + '</h4>'; 
	   infoHTML+='<h4 class="center uname">' + value.posted_by_name + '</h4>'; 
	   infoHTML+='</div>';
	   infoHTML+='<div class="col-md-7">';
	   infoHTML+='<h3 class="justify">'+ value.question + '</h3>';
	   infoHTML+='<a href="answers.html?'+jQuery.param(msg.data[index])+'">View answers</a>';
	   infoHTML+='</div>';
	   infoHTML+='</div>';
	   console.log(msg.data[index]);
	});
	console.log(abc);
   	if (abc=="Recent") {
  	$("#tab1").html(infoHTML);
  		 }
    else if (abc=="Trending") {
  	$("#tab2").html(infoHTML);
  		 }
  	 else  {
  	$("#tab3").html(infoHTML);
  		 }	 	 
  	});
  	}


  
     
   
  </script>
 

  <script type="text/javascript">

  $("#semester-dropdown").on('change', function() {
 var sem=this.value;

var data = JSON.stringify({
  "page": 0,
  "filters": [
    {
      "name": "semester",
      "value": sem
    },
    {
      "name": "tags",
      "value": "docker,python"
    }
  ]
});


console.log(data);
 $.ajax({
  method: "POST",
  url: "http://acadprojects.com/py/explora/filter",
  data:data,
    contentType: "application/json; charset=UTF-8"
  
	})
  .done(function( msg ) {
      var infoHTML='';
   	$.each(msg.data, function(index, value) { 
      infoHTML+='<div class="row">';
 	   infoHTML+='<div class="col-md-2 col-md-offset-1" class="user">';       
 	   infoHTML+='<figure class="centre">';
       infoHTML+='<img  src="assets/img/user1.png" class="img-responsive" id="img-circle"></figure>' ;    
	   infoHTML+='<h4 class="center">' + value.posted_by_email + '</h4>'; 
	   infoHTML+='<h4 class="center">' + value.posted_by_name + '</h4>'; 
	   infoHTML+='</div>';
	   infoHTML+='<div class="col-md-9">';
	   infoHTML+='<h3 class="justify">'+ value.question + '</h3>';
	   infoHTML+='<a href="answers.html?'+jQuery.param(msg.data[index])+'">View answers</a>';
	   infoHTML+='</div>';
	   infoHTML+='</div>';
  });
   	$(".tab-pane ,.fade, .in, .active").html(infoHTML);
});
});

$( "#butn" ).click(function( event ) {
  event.preventDefault();
    var email=$("#email").val();
    var name=$("#name").val();
    var question=$("#question").val();
    var subject=$("#subject").val();
    var semester=$("#semester").val();
    var data = JSON.stringify({
    
	"posted_by_email":email,
	"posted_by_name":name,
	"question":question,
	"subject_id":subject,
	"semester":semester
	

});
   $.ajax({
  method: "POST",
  url: "http://acadprojects.com/py/explora/question",
  data:data,
    contentType: "application/json; charset=UTF-8"
  
	})
  .done(function( msg ) {
    console.log(msg);
  });
 
});

$( "#search" ).click(function( event ) {
  event.preventDefault();
  var ask=$("#ask").val();
  if (ask=="python") {
  	subject=2;
  }
  else if (ask=="java") {
  	subject=1;
  }
  else if (ask=="javascript") {
  	subject=3;
  }
  else {
  	$(".tab-pane ,.fade, .in, .active").html("no data found");
  	return false;
  }
    var data = JSON.stringify({
    
	
	"page":page,
	"filters":[
		{
			"name":"subject_id",
			"value":subject
		}
		
	]

	

});
    $.ajax({
  method: "POST",
  url: "http://acadprojects.com/py/explora/filter",
  data:data,
    contentType: "application/json; charset=UTF-8"
  
	})
  .done(function( msg ) {
       var infoHTML='';
   	$.each(msg.data, function(index, value) { 
      infoHTML+='<div class="row">';
 	   infoHTML+='<div class="col-md-2 col-md-offset-1" class="user">';       
 	   infoHTML+='<figure class="centre">';
       infoHTML+='<img  src="assets/img/user1.png" class="img-responsive" id="img-circle"></figure>' ;    
	   infoHTML+='<h4 class="center">' + value.posted_by_email + '</h4>'; 
	   infoHTML+='<h4 class="center">' + value.posted_by_name + '</h4>'; 
	   infoHTML+='</div>';
	   infoHTML+='<div class="col-md-9">';
	   infoHTML+='<h3 class="justify">'+ value.question + '</h3>';
	   infoHTML+='<a href="answers.html?'+jQuery.param(msg.data[index])+'">View answers</a>';
	   infoHTML+='</div>';
	   infoHTML+='</div>';
	   console.log(msg.data);
  });
   	$(".tab-pane ,.fade, .in, .active").html(infoHTML);
  });
 
	

});
</script>

	</script>

	</body>
	</html>